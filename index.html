<!DOCTYPE html>
<html lang="en">
<head>
 
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#006400"/>
  <meta charset="UTF-8"/>
  <title>PRISMA SPORT</title>
  <meta name="description" content="PRISMA"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/materialize.min.css">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  
</head>
<body>
   
  <!-- Navigasi -->
  
  <nav class="teal darken-2" role="navigation">
    <div class="nav-wrapper container" id="nav">
      
      <a href="#home" id="logo-container">    
        PRISMA SPORT
       </a>

      <a href="#" class="sidenav-trigger" data-target="nav-mobile">â˜°</a>
      
      <ul class="topnav right hide-on-med-and-down"></ul>
      <ul class="sidenav" id="nav-mobile"></ul>
    </div>
  </nav>
  <!-- Akhir Navigasi -->

  <div class="" id="body-content"></div>

<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <script src="js/idb.js"></script>
  <script src="js/main.js"></script> 
  <script type="text/javascript" src="https://unpkg.com/snarkdown@1.0.2/dist/snarkdown.umd.js"></script>
  <script src="js/materialize.min.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/api.js"></script>


  <script>
// REGISTER SERVICE WORKER
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/service-worker.js')
        .then(function() {
            console.log('Pendaftaran ServiceWorker berhasil');
        })
        .catch(function(){
            console.log('Pendaftaran ServiceWorker gagal');
        });
    })
} else {
    console.log("ServiceWorker belum didukung browser ini.")
}      

    // Periksa fitur Notification API
    if ("Notification" in window) {
      requestPermission();
    } else {
      console.error("Browser tidak mendukung notifikasi.");
    };


  function requestPermission() {
if ('Notification' in window) {
  Notification.requestPermission().then(function (result) {
    if (result === "denied") {
      console.log("Fitur notifikasi tidak diijinkan.");
      return;
    } else if (result === "default") {
      console.error("Pengguna menutup kotak dialog permintaan ijin.");
      return;
    };
    
    // navigator.serviceWorker.getRegistration().then(function(reg) {
    //   reg.showNotification('Notifikasi diijinkan!');
    // });



    if (('PushManager' in window)) {
    navigator.serviceWorker.getRegistration().then(function(reg) {
        reg.pushManager.subscribe({
            userVisibleOnly: true
        }).then(function(sub) {
            console.log('Berhasil melakukan subscribe dengan endpoint: ', sub.endpoint);
        }).catch(function(e) {
            console.error('Tidak dapat melakukan subscribe ', e);
        });
    });
}

  });
}
    };

  
  //  REQUEST API UNTUK PERTAMA KALI
   document.addEventListener("DOMContentLoaded", function() {
        getListLeague();
        getCoba();
    });



  </script>

</body>
</html>